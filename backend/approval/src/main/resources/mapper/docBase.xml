<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.approval.dao.DocMapper">
    <insert id="insertDoc">
        insert into
        doc_base(doc_ttl,doc_text,doc_act_yn,doc_user_id,crt_date)
        values (#{doc_ttl},#{doc_text},"N",#{user_id},#{crt_date})
    </insert>

    <select id="selectAllDoc" resultType="com.example.approval.dto.retrieveAllOutputDto">
        select a.doc_no
             , a.doc_user_id
             , a.doc_ttl
             , b.user_dept
             , a.crt_date
        from doc_base a
        left join user_base b
               on a.doc_user_id = b.user_id
        where doc_user_id = #{user_id}
    </select>

    <select id="selectDoc" resultType="com.example.approval.dto.retrieveDocOutputDto">
        select a.doc_no
        , a.doc_ttl
        , a.doc_text
        , a.doc_user_id
        , a.crt_date
        , b.user_dept
        from doc_base a
        left join user_base b on a.doc_user_id = b.user_id
        where doc_no = #{doc_no};
    </select>
</mapper>
